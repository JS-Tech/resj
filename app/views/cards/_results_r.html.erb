<% if @cards.any? %>
  <script type="text/javascript">
    // Import from ruby
    <% sum = 0 %>
    <% @cards.map{|a| sum = sum+a.latitude} %>
    var latCenter =  <%= sum / @cards.size %>;
    <% sum = 0 %>
    <% @cards.map{|a| sum = sum+a.longitude} %>
    var lngCenter =  <%= sum / @cards.size %>;
    var addressPoints = <%= map_points(@cards) %>;
  </script>
  <%= render 'map' %>

  <script type="text/javascript">
  /* Show marker when click */
    $('.show-on-map').click(function(){
      var link = $(this);
      document.getElementById('map').scrollIntoView();
      markers.eachLayer(function(layer){
        if(layer.options.id == parseInt(link.data("id"))) {
          markers.zoomToShowLayer(layer, function() {
            layer.openPopup();
          });
        }
      });
    });
  </script>

<% else %>

  <script type="text/javascript">
    var latCenter = 46.6221;
    var lngCenter = 7.1960;
  </script>
  <%= render 'map' %>

<% end %>